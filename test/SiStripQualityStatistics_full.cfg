process CALIB = {
    
    service = MessageLogger {
	untracked vstring destinations = { "cout" }
	untracked PSet cout = { untracked string threshold = "INFO" }
#	untracked PSet cout = { untracked string threshold = "DEBUG" }
#	untracked vstring debugModules   = { "SiStripQuality" }
    }

    source = EmptyIOVSource {
	string timetype = "runnumber"
        uint64 firstValue = 1
	uint64 lastValue = 100000
        uint64 interval = 1
    }
    untracked PSet maxEvents = {untracked int32 input = -1}
  
    
    es_source a = PoolDBESSource {
	VPSet toGet = {	{ string record = "SiStripBadModuleRcd"  string tag = "SiStripBadChannel_v1"} }
	string connect = "sqlite_file:dbfile.db"
	string timetype = "runnumber"
	untracked string BlobStreamerName="TBufferBlobStreamingService"	   
 	PSet DBParameters ={
	    untracked string authenticationPath="/afs/cern.ch/cms/DB/conddb"
	}
    }


    es_source b = PoolDBESSource {
	VPSet toGet = {	
	    { string record = "SiStripFedCablingRcd"  string tag = "SiStripFedCabling_GR_21X_v2_hlt"}, 
	    { string record = "SiStripBadChannelRcd"  string tag = "SiStripBadChannel_GR_21X_v2_hlt"} 
	}
	string connect = "oracle://cms_orcoff_prod/CMS_COND_21X_STRIP"
	string timetype = "runnumber"
	untracked string BlobStreamerName="TBufferBlobStreamingService"	   
 	PSet DBParameters ={
	    untracked string authenticationPath="/afs/cern.ch/cms/DB/conddb"
	}
    }
    es_module sistripconn = SiStripConnectivity {}


    es_module = SiStripQualityESProducer {

	string appendToDataLabel = "test"

	untracked bool PrintDebug=true
	
	VPSet ListOfRecordToMerge = {
	    { string record = "SiStripBadModuleRcd"  string tag = ""} ,
	    { string record = "SiStripBadChannelRcd"  string tag = ""} ,
	    { string record = "SiStripDetCablingRcd"  string tag = ""} 
	}    	
	bool ReduceGranularity = true
	double ThresholdForReducedGranularity = .30
    }
    
    module stat = SiStripQualityStatistics{
	untracked string dataLabel = "test"
	untracked string TkMapFileName = "TkMaps/TkMapBadComponents_full.png"  #available filetypes: .pdf .png .jpg .svg
    }

    path p = { stat }
        
    module print = AsciiOutputModule {}
    endpath ep = { print }
}




