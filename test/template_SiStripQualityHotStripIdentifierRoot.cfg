process ICALIB = {

    service = MessageLogger {
        untracked vstring destinations = { "cout" }
        untracked PSet cout = { untracked string threshold = "DEBUG" }
#       untracked PSet cout = { untracked string threshold = "INFO" }
        untracked vstring debugModules   = { "*" }

    }


    source = EmptyIOVSource {
        string timetype = "runnumber"
        untracked uint32 firstRun = insertRun
        untracked uint32 lastRun = insertRun
        uint32 interval = 1
    }
    untracked PSet maxEvents = {untracked int32 input = 1}


    service = PoolDBOutputService{
        string connect = "sqlite_file:dbfile_cruzet3_MajidProductionC4.db"
        untracked string timetype = "runnumber"
        untracked string BlobStreamerName="TBufferBlobStreamingService"
        PSet DBParameters = {
            untracked string authenticationPath="/afs/cern.ch/cms/DB/conddb"
        }

##        VPSet toPut={ { string record = "SiStripBadStrip" string tag = "SiStripBadChannel_TKCC_20X_v2_offline"
} }
##        VPSet toPut={ { string record = "SiStripBadStrip" string tag = "SiStripBadChannel_TKCC_21X_v3_hlt"} }
        VPSet toPut={ { string record = "SiStripBadStrip" string tag = "SiStripBadChannel_v1"} }
    }

    #########################
    # DQM services
    #########################
    include "DQMServices/Core/data/DQM.cfg"


    module prod =  SiStripQualityHotStripIdentifierRoot {

        //ConditionDBWriter parameters
        bool SinceAppendMode = true
        string IOVMode       = "Run"
        string Record        = "SiStripBadStrip"
        bool doStoreOnDB     = false

        untracked string rootFilename = "insertInputDQMfile"
        untracked string rootDirPath = ""
        untracked uint32 verbosity =0
        //this module parameters
        #untracked FileInPath file = "CalibTracker/SiStripCommon/data/SiStripDetInfo.dat"

        PSet AlgoParameters = {
            string AlgoName= "SiStripHotStripAlgorithmFromClusterOccupancy"
            untracked double ProbabilityThreshold = 1.E-7
            untracked uint32 MinNumEntries = 100
            untracked uint32 MinNumEntriesPerStrip = 10
        }

        InputTag Cluster_src = siStripClusters
        untracked bool RemoveTrackClusters = true
        untracked InputTag Track_src = ALCARECOTkAlCosmicsCTF
        untracked PSet ClusterSelection = {
            #minWidth <= width <= maxWidth
            untracked uint32 minWidth = 1
            untracked uint32 maxWidth = 10000
        }
    }


    path p = { prod }

    module print = AsciiOutputModule {}
    endpath ep = { print }
}

